<div class="profile-container">
  <h1>Perfil del Usuario</h1>
  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <!-- Nombre -->
    <div class="form-group">
      <label for="name">Nombre Completo</label>
      <div class="input-group">
        <input
          id="name"
          formControlName="name"
          type="text"
          class="form-control"
          [readonly]="!editableFields['name']"
        />
        <button
          type="button"
          class="btn btn-secondary"
          (click)="toggleEdit('name')"
        >
          {{ editableFields['name'] ? 'Guardar' : 'Editar' }}
        </button>
      </div>
      <div
        *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched"
        class="text-danger"
      >
        El nombre es obligatorio y debe tener al menos 3 caracteres.
      </div>
    </div>

    <!-- Correo Electrónico -->
    <div class="form-group">
      <label for="email">Correo Electrónico</label>
      <div class="input-group">
        <input
          id="email"
          formControlName="email"
          type="email"
          class="form-control"
          [readonly]="!editableFields['email']"
        />
        <button
          type="button"
          class="btn btn-secondary"
          (click)="toggleEdit('email')"
        >
          {{ editableFields['email'] ? 'Guardar' : 'Editar' }}
        </button>
      </div>
      <div
        *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
        class="text-danger"
      >
        Introduce un correo válido.
      </div>
    </div>

    <!-- Teléfono -->
    <div class="form-group">
      <label for="phone">Teléfono</label>
      <div class="input-group">
        <input
          id="phone"
          formControlName="phone"
          type="tel"
          class="form-control"
          [readonly]="!editableFields['phone']"
        />
        <button
          type="button"
          class="btn btn-secondary"
          (click)="toggleEdit('phone')"
        >
          {{ editableFields['phone'] ? 'Guardar' : 'Editar' }}
        </button>
      </div>
      <div
        *ngIf="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched"
        class="text-danger"
      >
        Introduce un número de teléfono válido.
      </div>
    </div>

    <!-- Experiencia Laboral -->
    <div class="form-group">
      <label for="experience">Experiencia Laboral</label>
      <div class="input-group">
        <textarea
          id="experience"
          formControlName="experience"
          class="form-control"
          rows="5"
          [readonly]="!editableFields['experience']"
        ></textarea>
        <button
          type="button"
          class="btn btn-secondary"
          (click)="toggleEdit('experience')"
        >
          {{ editableFields['experience'] ? 'Guardar' : 'Editar' }}
        </button>
      </div>
    </div>

    <!-- Foto de Perfil -->
    <div class="form-group">
      <label for="profilePicture">Foto de Perfil</label>
      <input id="profilePicture" type="file" (change)="onFileSelected($event)" />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="profileForm.invalid">
      Guardar Perfil
    </button>
  </form>
</div>
